{
    "name": "checkout-branch",
    "guards": [ "isGitRepo" ], 
    "arguments": { "newBranchName": { "name": "newBranchName", "option": "--newBranchName" } },
    "description": "Comando para cambiar de branch y baja cualquier cambio que este en la remote branch o en main",
    "steps": [
        { "name": "valida que no sea la branch actual", "function": "validaNoseaBranchActual", "arguments": ["${newBranchName}"], "description": "Valida que no sea la branch actual", "errorMessage": "Ya esta parado sobre la branch ${newBranchName}" },
        { "name": "chequea si hay cambios sin commit", "function": "checkCommitPending", "description": "Chequea si hay algo sin commitear", "errorMessage": "Tiene modificaciones pendientes" },
        { "name": "baja cambios en remote y en main", "command": "git fetch", "description": "Baja de remote", "errorMessage": "No se pudo actualizar la branch, intente manualmente con git fetch" },
        { "criteria": { "field": "existNewBranch", "value": false }, "name": "crea de branch", "command": "git checkout -b", "arguments": ["${newBranchName}", "origin/main" ], "description": "Chequea si hay algo sin commitear", "errorMessage": "No se pudo mover al branch ${newBranch}. Hagalo manualmente (git checkout -b ${newBranch})" },
        { "criteria": { "field": "existNewBranch", "value": true }, "name": "cambia de branch", "command": "git branch", "arguments": ["${newBranchName}"], "description": "Cambia de branch", "errorMessage": "No se pudo mover al branch ${newBranch}. Hagalo manualmente (git branch ${newBranch})" },
        { "criteria": { "field": "existNewBranch", "value": true }, "name": "baja de la remote branch", "command": "git pull", "arguments": { "--set-upstream": "origin/${branchName}"}, "description": "Trae contenido de branch remota", "errorMessage": "No se pudo traer de la remote branch ${newBranch}. Hagalo manualmente (git pull --set-upstream origin/${branchName} )" },
        { "criteria": { "field": "existNewBranch", "value": true }, "name": "merge de main", "command": "git merge main", "description": "Trae cualquier cambio en main", "errorMessage": "No se pudo actualizar la branch con main, intente manualmente con git merge main" }
    ]
}